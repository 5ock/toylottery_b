webpackJsonp([1],{BPJ4:function(t,e){},DJ7Q:function(t,e){},JT1B:function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("7+uW"),s={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var o=a("VU/8")({name:"App",components:{}},s,!1,function(t){a("XF8Z")},null,null).exports,r=a("/ocq"),n=a("mtWM"),l=a.n(n),d=a("//Fk"),c=a.n(d),u={name:"toysLottery_card",props:["lotteryCardData","showEdit"],data:function(){return{a:!0,lottery_data:[]}},mounted:function(){},methods:{switchPage:function(t){window.open(t)},addZero:function(t){return parseInt(t)<10&&(t="0"+t),String(t)},checkExpire:function(t,e){var a=new Date,i=a.getFullYear(),s=a.getMonth()+1,o=a.getDate(),r=a.getHours(),n=a.getMinutes(),l=i+this.addZero(s)+this.addZero(o),d=this.addZero(r)+this.addZero(n),c=t.year+t.month+t.day,u=e.hour+e.min;return!(c>l)&&(c<l||!(u>d))},calData:function(){this.lottery_data=[];for(var t=0;t<this.lotteryCardData.length;t++){var e={};e.item=this.lotteryCardData[t].item,e.isLottery=1==this.lotteryCardData[t].isLottery?"L":"B",e.notify=1==this.lotteryCardData[t].notify,e.date=this.lotteryCardData[t].date.year+"年"+this.lotteryCardData[t].date.month+"月"+this.lotteryCardData[t].date.day+"日",e.price=this.lotteryCardData[t].price,e.time=this.lotteryCardData[t].time.hour+":"+this.lotteryCardData[t].time.min,e.url=this.lotteryCardData[t].url,e.remarks=this.lotteryCardData[t].remarks,e._id=this.lotteryCardData[t]._id,e.isExpire=this.checkExpire(this.lotteryCardData[t].date,this.lotteryCardData[t].time),this.lottery_data.push(e)}},editItem:function(t){this.$emit("isClick",t)},deleteItem:function(t){this.$emit("isDelete",t)}},watch:{lotteryCardData:function(){this.calData()}}},v={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"toysLottery_card"},[t._l(t.lottery_data,function(e,i){return a("div",{key:i,staticClass:"card bg-light mb-3 mr-3",staticStyle:{width:"335px",height:"167px"}},[a("div",{staticClass:"card-header ly-card-header",class:{"ly-notExpire":!e.isExpire}},[a("div",{staticClass:"card-header-text"},[t._v(t._s(e.item))]),t._v(" "),t.showEdit?a("div",{staticClass:"icon-delete",on:{click:function(a){return t.deleteItem(e)}}}):t._e(),t._v(" "),t.showEdit?a("div",{staticClass:"icon-edit",on:{click:function(a){return t.editItem(e._id)}}}):t._e()]),t._v(" "),a("div",{staticClass:"card-body",staticStyle:{padding:"5px 1.25rem",position:"relative"}},[a("div",{staticClass:"lottery-remind-block"},[a("div",{staticClass:"text-lottery"},[t._v(t._s(e.isLottery))]),t._v(" "),a("div",{staticClass:"icon-notify",class:{On:1==e.notify,Off:0==e.notify}})]),t._v(" "),a("div",{staticClass:"card-text"},[t._v("日期 : "+t._s(e.date))]),t._v(" "),a("div",{staticClass:"card-text"},[t._v("時間 : "+t._s(e.time))]),t._v(" "),a("div",{staticClass:"card-text"},[t._v("價格 : "+t._s(e.price))]),t._v(" "),a("div",{staticClass:"card-text"},[t._v("連結 : "),a("a",{staticClass:"lottery-link",on:{click:function(a){return a.preventDefault(),t.switchPage(e.url)}}},[t._v("Click Here")])]),t._v(" "),a("div",{staticClass:"card-text text-ellipsis",attrs:{title:e.remarks}},[t._v("備註 : "+t._s(e.remarks))])])])}),t._v(" "),a("div",{staticClass:"loader"})],2)},staticRenderFns:[]};var m=a("VU/8")(u,v,!1,function(t){a("mMCx")},"data-v-6ad1e4d0",null).exports,_={components:{lotteryCard:m},name:"home",data:function(){return{isShow_m_navbar:!1,lotteryCardList:[]}},mounted:function(){this.getLotteryList()},methods:{enterLogin:function(){this.$router.push("/login")},getLotteryList:function(){var t=this;return new c.a(function(e,a){var i=t;i.axios.get("/lotteryData").then(function(t){t.data.sort(function(t,e){return t.date.year+t.date.month+t.date.day+t.time.hour+t.time.min>e.date.year+e.date.month+e.date.day+e.time.hour+e.time.min?-1:1}),i.lotteryCardList=t.data,e()})})}}},p={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"toysLottery"},[e("nav",{staticClass:"navbar navbar-dark fixed-top bg-dark flex-md-nowrap p-0 shadow"},[e("a",{staticClass:"navbar-brand ml-2"},[this._v("Toys Lotterys System")]),this._v(" "),e("ul",{staticClass:"navbar-nav px-2"},[e("li",{staticClass:"nav-item text-nowrap"},[e("a",{staticClass:"nav-link",attrs:{href:"#"},on:{click:this.enterLogin}},[this._v("Sign in")])])])]),this._v(" "),e("div",{staticClass:"container-fluid"},[e("main",{staticClass:"main",attrs:{role:"main"}},[e("div",{staticStyle:{"max-width":"1404px",margin:"0 auto"}},[e("lotteryCard",{attrs:{lotteryCardData:this.lotteryCardList}})],1)])])])},staticRenderFns:[]};var h=a("VU/8")(_,p,!1,function(t){a("lcUJ")},"data-v-72e75b83",null).exports,f=a("BUS2"),y={name:"Login",data:function(){return{login_password:""}},mounted:function(){sessionStorage.clear()},methods:{login:function(){var t=this,e={password:Object(f.sha256)(t.login_password)};t.axios.post("/user/login",e).then(function(e){"ok"==e.data.response?(sessionStorage.role="admin",t.$router.push("/lottery")):alert("error")})}}},w={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"Login"},[a("form",{staticClass:"form-signin",on:{submit:function(e){return e.preventDefault(),t.login(e)}}},[a("h1",{staticClass:"h3 mb-3 font-weight-normal"},[t._v("Sign in")]),t._v(" "),a("label",{staticClass:"sr-only",attrs:{for:"inputPassword"}},[t._v("Password")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.login_password,expression:"login_password"}],staticClass:"form-control",attrs:{type:"password",id:"inputPassword",placeholder:"Password"},domProps:{value:t.login_password},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.login(e)},input:function(e){e.target.composing||(t.login_password=e.target.value)}}}),t._v(" "),a("button",{staticClass:"btn btn-lg btn-primary btn-block",attrs:{type:"submit"}},[t._v("Sign in")]),t._v(" "),a("p",{staticClass:"mt-5 mb-3 text-muted"},[t._v("Copyright © 2020 by 5ockdart")])])])},staticRenderFns:[]};var g=a("VU/8")(y,w,!1,function(t){a("BPJ4")},"data-v-ff54184c",null).exports,C={name:"LoginCreate",data:function(){return{create_user:"",create_password:"",result_text:""}},methods:{createUser:function(){var t=this,e={user:this.create_user,password:Object(f.sha256)(this.create_password)};t.axios.post("/user/createUser",e).then(function(e){"ok"==e.data.response?(t.result_text="succeed",t.$router.push("/logincreate")):t.result_text="error"})}}},x={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"LoginCreate"},[a("form",{staticClass:"form-signin"},[a("h1",{staticClass:"h3 mb-3 font-weight-normal"},[t._v("Sign up")]),t._v(" "),a("label",{staticClass:"sr-only",attrs:{for:"validatecode"}},[t._v("Validate Code")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.create_user,expression:"create_user"}],staticClass:"form-control",attrs:{type:"text",id:"validatecode",placeholder:"validate code"},domProps:{value:t.create_user},on:{input:function(e){e.target.composing||(t.create_user=e.target.value)}}}),t._v(" "),a("label",{staticClass:"sr-only",attrs:{for:"inputPassword"}},[t._v("Password")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.create_password,expression:"create_password"}],staticClass:"form-control",attrs:{type:"password",id:"inputPassword",placeholder:"Password"},domProps:{value:t.create_password},on:{input:function(e){e.target.composing||(t.create_password=e.target.value)}}}),t._v(" "),a("button",{staticClass:"btn btn-lg btn-primary btn-block",on:{click:t.createUser}},[t._v("Done")]),t._v(" "),a("p",{staticClass:"mt-5 mb-3 text-muted"},[t._v("Copyright © 2020 by 5ockdart")]),t._v(" "),a("p",{staticClass:"txt-muted",staticStyle:{color:"red"}},[t._v(t._s(t.result_text))])])])},staticRenderFns:[]};var b=a("VU/8")(C,x,!1,function(t){a("RomU")},"data-v-5464090b",null).exports,k={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"toysLottery"},[a("nav",{staticClass:"navbar navbar-dark fixed-top bg-dark flex-md-nowrap p-0 shadow"},[a("button",{staticClass:"navbar-toggler carzy_toggler",attrs:{type:"button","data-toggle":"collapse","data-target":"#navbarTogglerDemo01","aria-controls":"navbarTogglerDemo01","aria-expanded":"false","aria-label":"Toggle navigation"},on:{click:function(e){e.preventDefault(),t.isShow_m_navbar=!t.isShow_m_navbar}}},[a("span",{staticClass:"navbar-toggler-icon"})]),t._v(" "),a("a",{staticClass:"navbar-brand"},[t._v("Toys Lotterys System")]),t._v(" "),a("ul",{staticClass:"navbar-nav px-2"},[a("li",{staticClass:"nav-item text-nowrap"},[a("a",{staticClass:"nav-link",attrs:{href:"#"},on:{click:t.logout}},[t._v("Sign out")])])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.isShow_m_navbar,expression:"isShow_m_navbar"}],staticClass:"navbar-collapse carzy_navbar"},[a("ul",{staticClass:"navbar-nav mt-2"},[a("li",{staticClass:"nav-item",staticStyle:{"padding-left":"20px"}},[a("router-link",{staticClass:"nav-link active",attrs:{to:"/lottery"},nativeOn:{click:function(e){t.isShow_m_navbar=!t.isShow_m_navbar}}},[t._v("Edit Lottery")])],1)])])]),t._v(" "),a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row"},[a("nav",{staticClass:"col-md-2 d-none d-md-block bg-light sidebar"},[a("div",{staticClass:"sidebar-sticky"},[a("ul",{staticClass:"nav flex-column"},[a("li",{staticClass:"nav-item"}),t._v(" "),a("li",{staticClass:"nav-item"},[a("router-link",{staticClass:"nav-link active",attrs:{to:"/lottery"}},[t._v("Edit Lottery")])],1)])])]),t._v(" "),a("main",{staticClass:"col-md-9 col-lg-9 main",attrs:{role:"main"}},[a("router-view",{staticClass:"my-4 w-100"})],1)])])])},staticRenderFns:[]};var D=a("VU/8")({name:"toysLottery",data:function(){return{isShow_m_navbar:!1}},methods:{logout:function(){var t=this;t.axios.post("/user/logout").then(function(e){t.$router.push("/home")})}}},k,!1,function(t){a("JT1B")},"data-v-e8fcdfae",null).exports,L=a("woOf"),S=a.n(L),P={name:"toysLottery_modal",props:["modalData","title"],data:function(){return{modal_title:"",edit_data:{item:"",date:{year:"9999",month:"99",day:"99"},time:{hour:"99",min:"99"},price:"",isLottery:"1",notify:"1",remarks:""},years:[],month:["01","02","03","04","05","06","07","08","09","10","11","12"]}},mounted:function(){this.getYears()},methods:{setData:function(){var t,e=this,a=this;t=this.edit_data,"Add"==this.title?a.axios.post("/lotteryData",t).then(function(t){"ok"==t.data.response&&(a.closeDialog(),e.$emit("setData"))}):a.axios.put("/lotteryData",t).then(function(t){"ok"==t.data.response&&(a.closeDialog(),e.$emit("setData"))})},closeDialog:function(){this.$emit("closeModal")},getYears:function(){for(var t=(new Date).getFullYear(),e=0;e<5;e++){var a=parseInt(t)+e;this.years.push(a)}},addZero:function(t){return parseInt(t)<10&&(t="0"+t),String(t)},calDay:function(t){for(var e=[],a=1;a<=t;a++)e.push(this.addZero(a));return e},calTime:function(t){for(var e=[],a=0;a<t;a++)e.push(this.addZero(a));return e}},watch:{modalData:function(){this.edit_data=this.modalData},title:function(){this.modal_title=this.title}},computed:{days:function(){return"02"==this.data_month?this.calDay(28):"04"==this.data_month||"06"==this.data_month||"09"==this.data_month||"12"==this.data_month?this.calDay(30):this.calDay(31)},hour:function(){return this.calTime(24)},min:function(){return this.calTime(60)}}},$={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"lottery_modal"},[a("div",{staticClass:"modal-dialog"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h4",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[t._v(t._s(t.modal_title))]),t._v(" "),a("button",{staticClass:"close",attrs:{type:"button"},on:{click:t.closeDialog}},[a("span",[t._v("×")])])]),t._v(" "),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"form-group t-maxWidth"},[a("label",[t._v("商品名稱 :")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.edit_data.item,expression:"edit_data.item"}],staticClass:"form-control",attrs:{type:"text",placeholder:"ex: headlockstudio"},domProps:{value:t.edit_data.item},on:{input:function(e){e.target.composing||t.$set(t.edit_data,"item",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-group t-maxWidth"},[a("label",[t._v("日期 :")]),t._v(" "),a("div",{staticStyle:{display:"flex"}},[a("div",{staticStyle:{"max-width":"150px",flex:"1","margin-right":"20px"}},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.edit_data.date.year,expression:"edit_data.date.year"}],staticClass:"custom-select",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.edit_data.date,"year",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"9999"}},[t._v("Year")]),t._v(" "),t._l(t.years,function(e){return a("option",{domProps:{value:e}},[t._v(t._s(e))])})],2)]),t._v(" "),a("div",{staticStyle:{"max-width":"150px",flex:"1","margin-right":"20px"}},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.edit_data.date.month,expression:"edit_data.date.month"}],staticClass:"custom-select",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.edit_data.date,"month",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"99"}},[t._v("Month")]),t._v(" "),t._l(t.month,function(e){return a("option",{domProps:{value:e}},[t._v(t._s(e))])})],2)]),t._v(" "),a("div",{staticStyle:{"max-width":"150px",flex:"1"}},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.edit_data.date.day,expression:"edit_data.date.day"}],staticClass:"custom-select",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.edit_data.date,"day",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"99"}},[t._v("Day")]),t._v(" "),t._l(t.days,function(e,i){return a("option",{domProps:{value:e}},[t._v(t._s(e))])})],2)])])]),t._v(" "),a("div",{staticClass:"form-group t-maxWidth"},[a("label",[t._v("時間 :")]),t._v(" "),a("div",{staticStyle:{display:"flex"}},[a("div",{staticStyle:{"max-width":"150px",flex:"1","margin-right":"20px"}},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.edit_data.time.hour,expression:"edit_data.time.hour"}],staticClass:"custom-select",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.edit_data.time,"hour",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"99"}},[t._v("Hour")]),t._v(" "),t._l(t.hour,function(e,i){return a("option",{domProps:{value:e}},[t._v(t._s(e))])})],2)]),t._v(" "),a("div",{staticStyle:{"max-width":"150px",flex:"1"}},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.edit_data.time.min,expression:"edit_data.time.min"}],staticClass:"custom-select",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.edit_data.time,"min",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"99"}},[t._v("Min")]),t._v(" "),t._l(t.min,function(e,i){return a("option",{domProps:{value:e}},[t._v(t._s(e))])})],2)])])]),t._v(" "),a("div",{staticClass:"form-group t-maxWidth"},[a("label",[t._v("價格 :")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.edit_data.price,expression:"edit_data.price"}],staticClass:"form-control",attrs:{type:"text",placeholder:"ex: 2000台幣"},domProps:{value:t.edit_data.price},on:{input:function(e){e.target.composing||t.$set(t.edit_data,"price",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-group t-maxWidth"},[a("label",[t._v("網址 :")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.edit_data.url,expression:"edit_data.url"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.edit_data.url},on:{input:function(e){e.target.composing||t.$set(t.edit_data,"url",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-group t-maxWidth"},[a("label",{staticStyle:{width:"110px"}},[t._v("抽選 or 直購 :")]),t._v(" "),a("label",{staticClass:"radioStyle",class:{isSelect:1==t.edit_data.isLottery},attrs:{for:"Lottery"}},[t._v("抽選")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.edit_data.isLottery,expression:"edit_data.isLottery"}],staticStyle:{display:"none"},attrs:{id:"Lottery",type:"radio",value:"1"},domProps:{checked:t._q(t.edit_data.isLottery,"1")},on:{change:function(e){return t.$set(t.edit_data,"isLottery","1")}}}),t._v(" "),a("label",{staticClass:"radioStyle",class:{isSelect:0==t.edit_data.isLottery},attrs:{for:"purchase"}},[t._v("直購")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.edit_data.isLottery,expression:"edit_data.isLottery"}],staticStyle:{display:"none"},attrs:{id:"purchase",type:"radio",value:"0"},domProps:{checked:t._q(t.edit_data.isLottery,"0")},on:{change:function(e){return t.$set(t.edit_data,"isLottery","0")}}})]),t._v(" "),a("div",{staticClass:"form-group t-maxWidth"},[a("label",{staticStyle:{width:"110px"}},[t._v("是否通知 :")]),t._v(" "),a("label",{staticClass:"radioStyle",class:{isSelect:"1"==t.edit_data.notify},attrs:{for:"Yes"}},[t._v("要")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.edit_data.notify,expression:"edit_data.notify"}],staticStyle:{display:"none"},attrs:{id:"Yes",type:"radio",value:"1"},domProps:{checked:t._q(t.edit_data.notify,"1")},on:{change:function(e){return t.$set(t.edit_data,"notify","1")}}}),t._v(" "),a("label",{staticClass:"radioStyle",class:{isSelect:"0"==t.edit_data.notify},attrs:{for:"No"}},[t._v("不要")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.edit_data.notify,expression:"edit_data.notify"}],staticStyle:{display:"none"},attrs:{id:"No",type:"radio",value:"0"},domProps:{checked:t._q(t.edit_data.notify,"0")},on:{change:function(e){return t.$set(t.edit_data,"notify","0")}}})]),t._v(" "),a("div",{staticClass:"form-group t-maxWidth"},[a("label",{attrs:{for:"exampleFormControlTextarea1"}},[t._v("備註:")]),t._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.edit_data.remarks,expression:"edit_data.remarks"}],staticClass:"form-control",staticStyle:{height:"40px"},attrs:{rows:"3"},domProps:{value:t.edit_data.remarks},on:{input:function(e){e.target.composing||t.$set(t.edit_data,"remarks",e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.setData}},[t._v("確認")])])])])])},staticRenderFns:[]};var N={name:"DlPopview",components:{},data:function(){return{popview_show:!1,loading_show:!1,count_show:!1,count_text:" ",text_show:!1,text_text:"",btn_ok_show:!1,btn_cancel_show:!1,resolve:"",reject:"",promise:"",timer:null}},methods:{wait:function(t){var e=this;e.loading_show=!0,e.count_show=!1,e.text_text=null==t?"Wait...":t,e.text_show=!0,e.btn_ok_show=!1,e.btn_cancel_show=!1,e.popview_show=!0},count:function(t,e){var a=this,i=parseInt(e);return a.promise=new c.a(function(e,s){a.resolve=e,a.reject=s,a.loading_show=!0,a.count_text=i+" Sec",a.count_show=!0,a.text_text=null==t?"Please wait...":t,a.text_show=!0,a.btn_ok_show=!1,a.btn_cancel_show=!1,a.popview_show=!0,a.timer=setInterval(function(){i--,a.count_text=i+" Sec",i<=0&&(clearInterval(a.timer),a.timer=null,a.resolve())},1e3)}),a.promise},percent:function(t,e){var a=this,i=parseInt(e),s=0,o=0;return a.promise=new c.a(function(e,r){a.resolve=e,a.reject=r,a.loading_show=!0,a.count_text=o+" %",a.count_show=!0,a.text_text=null==t?"Please wait...":t,a.text_show=!0,a.btn_ok_show=!1,a.btn_cancel_show=!1,a.popview_show=!0,a.timer=setInterval(function(){o=Math.ceil(++s/i*100),a.count_text=o+" %",o>=100&&(clearInterval(a.timer),a.timer=null,a.resolve())},1e3)}),a.promise},confirm:function(t){var e=this;return e.promise=new c.a(function(a,i){e.resolve=a,e.reject=i,e.popview_show=!0,e.count_show=!1,e.text_text=t,e.text_show=!0,e.btn_ok_show=!0,e.btn_cancel_show=!1,e.loading_show=!1}),e.promise},check:function(t){var e=this;return e.promise=new c.a(function(a,i){e.resolve=a,e.reject=i,e.loading_show=!1,e.count_show=!1,e.text_text=t,e.text_show=!0,e.btn_ok_show=!0,e.btn_cancel_show=!0,e.popview_show=!0}),e.promise},hide:function(){var t=this;t.resolve="",t.reject="",t.promise="",null!=t.timer&&(clearInterval(t.timer),t.timer=null),t.popview_show=!1},click_ok:function(){this.resolve()},click_cancel:function(){this.reject()}},beforeDestroy:function(){null!=this.timer&&(clearInterval(this.timer),this.timer=null)}},M={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"show",rawName:"v-show",value:t.popview_show,expression:"popview_show"}],staticClass:"ly_popview"},[a("div",{staticClass:"dl_popview_border"},[a("div",{staticClass:"dl_popview_window"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.loading_show,expression:"loading_show"}],staticClass:"ly_loading"}),t._v(" "),a("img",{staticClass:"infoimg"}),t._v(" "),a("p",{directives:[{name:"show",rawName:"v-show",value:t.count_show,expression:"count_show"}],staticClass:"dl_popview_count"},[t._v(t._s(t.count_text))]),t._v(" "),a("p",{directives:[{name:"show",rawName:"v-show",value:t.text_show,expression:"text_show"}],staticClass:"dl_popview_text"},[t._v(t._s(t.text_text))]),t._v(" "),a("div",{staticClass:"dl_popview_btns"},[a("button",{directives:[{name:"show",rawName:"v-show",value:t.btn_ok_show,expression:"btn_ok_show"}],staticClass:"dl_popview_ok",attrs:{type:"button"},on:{click:t.click_ok}},[t._v("OK")]),t._v(" "),a("button",{directives:[{name:"show",rawName:"v-show",value:t.btn_cancel_show,expression:"btn_cancel_show"}],staticClass:"dl_popview_cancel",attrs:{type:"button"},on:{click:t.click_cancel}},[t._v("Cancel")])])])])])},staticRenderFns:[]};var E={components:{lotteryCard:m,lotteryModal:a("VU/8")(P,$,!1,function(t){a("z88j")},"data-v-55ba4e15",null).exports,lyPopView:a("VU/8")(N,M,!1,function(t){a("a52K")},"data-v-34859039",null).exports},name:"toysLottery_add",data:function(){return{lotteryCardList:[],modal_item:{showModal:!1,action:"",data:{}},modal_show:!1}},mounted:function(){this.getLotteryList()},methods:{saveData:function(){var t=this;this.$refs.lyPopView.wait(),this.closeModal(),this.getLotteryList().then(function(){t.$refs.lyPopView.hide()})},deleteItem:function(t){var e=this;this.$refs.lyPopView.check("確定要刪除?").then(function(a){e.$refs.lyPopView.wait(),e.axios.delete("/lotteryData",{data:{obj:t}}).then(function(t){"ok"==t.data.response&&e.getLotteryList().then(function(){e.$refs.lyPopView.hide()})})},function(t){console.log(2),e.$refs.lyPopView.hide()})},getLotteryList:function(){var t=this;return new c.a(function(e,a){var i=t;i.axios.get("/lotteryData").then(function(t){t.data.sort(function(t,e){return t.date.year+t.date.month+t.date.day+t.time.hour+t.time.min>e.date.year+e.date.month+e.date.day+e.time.hour+e.time.min?-1:1}),i.lotteryCardList=t.data,e()})})},openModal:function(t){this.modal_item.action=t,this.modal_item.showModal=!0},editItem:function(t){this.modal_item.action="Edit";for(var e=0;e<this.lotteryCardList.length;e++)if(this.lotteryCardList[e]._id==t){this.modal_item.data=S()({},this.lotteryCardList[e]);break}this.modal_item.showModal=!0},closeModal:function(){this.modal_item.data={item:"",date:{year:"9999",month:"99",day:"99"},time:{hour:"99",min:"99"},price:"",isLottery:"1",notify:"1",remarks:""},this.modal_item.showModal=!1},addZero:function(t){return parseInt(t)<10&&(t="0"+t),String(t)}}},I={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"toysLottery_add"},[a("div",{staticClass:"lottery_info_header"},[a("h2",{staticClass:" mb-4"},[t._v("Lottery Info")]),t._v(" "),a("button",{staticClass:"btn btn-info",attrs:{type:"button"},on:{click:function(e){return t.openModal("Add")}}},[t._v("新增")])]),t._v(" "),a("lotteryCard",{attrs:{lotteryCardData:t.lotteryCardList,showEdit:!0},on:{isClick:t.editItem,isDelete:t.deleteItem}}),t._v(" "),a("lotteryModal",{directives:[{name:"show",rawName:"v-show",value:t.modal_item.showModal,expression:"modal_item.showModal"}],attrs:{modalData:t.modal_item.data,title:t.modal_item.action},on:{closeModal:t.closeModal,setData:t.saveData}}),t._v(" "),a("lyPopView",{ref:"lyPopView"})],1)},staticRenderFns:[]};var V=a("VU/8")(E,I,!1,function(t){a("DJ7Q")},"data-v-190cb476",null).exports;a("gAs1");i.a.use(r.a);var U=new r.a({routes:[{path:"*",redirect:"home"},{name:"home",path:"/home",component:h},{name:"login",path:"/login",component:g},{name:"LoginCreate",path:"/logincreate",component:b},{path:"/lottery",component:D,children:[{name:"lottery",path:"",component:V,meta:{requiresAuth:!0}}]}]});U.beforeEach(function(t,e,a){t.matched.some(function(t){return t.meta.requiresAuth})?l.a.post("user/checklogin").then(function(t){"ok"==t.data.response?a():a({path:"home"})}):a()});var F=U,j=a("Rf8U"),A=a.n(j);i.a.use(A.a,l.a),i.a.config.productionTip=!1,new i.a({el:"#app",components:{App:o},template:"<App/>",router:F})},RomU:function(t,e){},XF8Z:function(t,e){},a52K:function(t,e){},lcUJ:function(t,e){},mMCx:function(t,e){},z88j:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.c133e4ea09608842d151.js.map